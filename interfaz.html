<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgb(255, 255, 255);

        }

        main {

            background-color: rgb(252, 249, 245);
            box-shadow: 5px 5px 5px 5px rgba(0, 0, 0, 0.192);
            width: 80%;
            height: 70%;

        }

        #pregunta {
            position: relative;
            top: 80%;
            width: 85%;
        }

        form {
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        #preguntasub {
            background-color: rgb(214, 255, 255);
            border-radius: 50px;
            width: 85%;
            margin-left: 30px;


        }

        #contestacion {
            background-color: rgb(229, 255, 214);
            border-radius: 10px;
            width: 95%;
            margin-left: 5px;
            overflow: auto;
            max-height: 300px;
            text-align: left;
            padding: 5px;
            display: none;

        }

        #pensando {
            background-color: rgb(229, 255, 214);
            border-radius: 50px;
            width: 85%;
            margin-left: 30px;
            display: none;

        }

        #titilar {
            animation-name: titil;
            animation-duration: .5s;
            animation-iteration-count: infinite;

        }

        @keyframes titil {
            0% {
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }

        }

        #cen {
            background-color: rgb(255, 255, 255);
            text-align: center;
            align-items: center;
            justify-content: center;
            display: flex;
        }

        #pen {
            animation-name: girar;
            animation-duration: .5s;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            border-radius: 100px;
            border: 3px solid gray;
            border-top: 3px solid blue;
            width: 15px;
            height: 15px;
            display: none;


        }

        @keyframes girar {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <main>
        <form id="form" method="post">
            <h1 id="logrado"></h1>
            <p id="preguntasub"></p>
            <div id="cen">
                <p id="pensando">pensando<span id="titilar">.....</span></p>
                <div id="pen"> </div>
            </div>
            <br>
            <p id="contestacion"></p>

            <input id="pregunta" type="text">
            <input type="submit">
        </form>
    </main>
    <script>
        const sub = document.getElementById("form").addEventListener("submit", respuesta)

        function respuesta(event) {
            event.preventDefault();
            let girar = document.getElementById("pen")
            let pensando = document.getElementById("pensando")
            let logrado = document.getElementById("logrado");
            let preguntasub = document.getElementById("preguntasub");
            const questioncampo = document.getElementById("pregunta");


            let question = questioncampo.value;
            preguntasub.innerHTML = question;
            let respuesta = document.getElementById("contestacion");
            respuesta.style.display = "none" 
            if (question) {
                questioncampo.value = "";
                pensando.style.display = "block"
                girar.style.display = "block"



                axios.post("http://localhost:8000/procesar", {
                    question: question
                }, {
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })

                    .then(response => {
                        logrado.innerHTML = "se logro";
                        pensando.style.display = "none"
                        girar.style.display = "none"

                        respuesta.style.display = "block"

                        console.log("es", response.data.respuesta)
                        respuesta.innerHTML = response.data.respuesta

                    })
                    .catch(error => {
                        console.log(error)
                    })

            } else{
                preguntasub.innerHTML = "Ingresa pregunta"
            }
        }

    </script>
</body>

</html>